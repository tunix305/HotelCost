(function(){"use strict";var e={9960:function(e,a,t){var o=t(5130),l=t(6768);function s(e,a,t,o,s,i){const n=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.Wv)(n)}var i={name:"App",mounted(){console.log("✅ App.vue cargado")}},n=t(1241);const r=(0,n.A)(i,[["render",s]]);var c=r,d=t(1387),u=t(4232),m=t(3902),b=t(6450),h=t(554),f=t(2729),p=t(1606),k=t(697),g=t(3745),v=t(1772),_=t(1560),F=t(3813),w=t(1720),x=t(5126),y=t(7973),L=t(6554),C=t(3948);const E={class:"help-links mt-4 text-center"};function I(e,a,t,s,i,n){return(0,l.uX)(),(0,l.Wv)(b.E,null,{default:(0,l.k6)((()=>[(0,l.bF)(F.I,{class:"login-container d-flex justify-center align-center",fluid:""},{default:(0,l.k6)((()=>[(0,l.bF)(f.J,{class:"habitaciones-style-card pa-8",elevation:"10","max-width":"500"},{default:(0,l.k6)((()=>[(0,l.bF)(p.r,{class:"text-h6 font-weight-bold text-center mb-4 text-white"},{default:(0,l.k6)((()=>a[12]||(a[12]=[(0,l.eW)(" Iniciar Sesión ")]))),_:1}),(0,l.bF)(x.y,{src:m,contain:"",height:"70",class:"mx-auto mb-4"}),(0,l.bF)(_.n,{onSubmit:(0,o.D$)(n.login,["prevent"])},{default:(0,l.k6)((()=>[(0,l.bF)(C.W,{modelValue:i.username,"onUpdate:modelValue":a[0]||(a[0]=e=>i.username=e),label:"Usuario",variant:"outlined",density:"comfortable",class:"custom-field",required:""},null,8,["modelValue"]),(0,l.bF)(C.W,{modelValue:i.password,"onUpdate:modelValue":a[1]||(a[1]=e=>i.password=e),label:"Contraseña",type:"password",variant:"outlined",density:"comfortable",class:"custom-field",required:""},null,8,["modelValue"]),n.isAdmin?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(y.d4,{key:0,modelValue:i.role,"onUpdate:modelValue":a[2]||(a[2]=e=>i.role=e),items:i.roles,label:"Rol",variant:"outlined",density:"comfortable",class:"custom-field",disabled:n.isAdmin,required:!n.isAdmin},null,8,["modelValue","items","disabled","required"])),(0,l.bF)(h.D,{class:"login-button mt-4",block:"",type:"submit",size:"large"},{default:(0,l.k6)((()=>a[13]||(a[13]=[(0,l.eW)("INICIAR SESIÓN")]))),_:1})])),_:1},8,["onSubmit"]),(0,l.Lk)("div",E,[(0,l.Lk)("span",{onClick:a[3]||(a[3]=e=>i.showErrorDialog=!0),class:"help-text"},"¿Tienes algún error?"),a[14]||(a[14]=(0,l.Lk)("br",null,null,-1)),(0,l.Lk)("span",{onClick:a[4]||(a[4]=e=>i.showPasswordDialog=!0),class:"help-text"}," ¿Olvidaste la contraseña? ")])])),_:1}),(0,l.bF)(L.K,{modelValue:i.snackbar,"onUpdate:modelValue":a[5]||(a[5]=e=>i.snackbar=e),timeout:"3000",color:"error"},{default:(0,l.k6)((()=>[(0,l.eW)((0,u.v_)(i.snackbarMessage),1)])),_:1},8,["modelValue"]),(0,l.bF)(v.p,{modelValue:i.showErrorDialog,"onUpdate:modelValue":a[7]||(a[7]=e=>i.showErrorDialog=e),"max-width":"400"},{default:(0,l.k6)((()=>[(0,l.bF)(f.J,null,{default:(0,l.k6)((()=>[(0,l.bF)(p.r,{class:"headline"},{default:(0,l.k6)((()=>a[15]||(a[15]=[(0,l.eW)("Soporte")]))),_:1}),(0,l.bF)(k.O,null,{default:(0,l.k6)((()=>a[16]||(a[16]=[(0,l.eW)("Comunícate con uno de nuestros asesores.")]))),_:1}),(0,l.bF)(g.S,null,{default:(0,l.k6)((()=>[(0,l.bF)(w.h),(0,l.bF)(h.D,{color:"primary",text:"",onClick:a[6]||(a[6]=e=>i.showErrorDialog=!1)},{default:(0,l.k6)((()=>a[17]||(a[17]=[(0,l.eW)("Cerrar")]))),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(v.p,{modelValue:i.showPasswordDialog,"onUpdate:modelValue":a[9]||(a[9]=e=>i.showPasswordDialog=e),"max-width":"400"},{default:(0,l.k6)((()=>[(0,l.bF)(f.J,null,{default:(0,l.k6)((()=>[(0,l.bF)(p.r,{class:"headline"},{default:(0,l.k6)((()=>a[18]||(a[18]=[(0,l.eW)("Recuperar Contraseña")]))),_:1}),(0,l.bF)(k.O,null,{default:(0,l.k6)((()=>a[19]||(a[19]=[(0,l.eW)("Contacta al administrador para recuperar tu acceso.")]))),_:1}),(0,l.bF)(g.S,null,{default:(0,l.k6)((()=>[(0,l.bF)(w.h),(0,l.bF)(h.D,{color:"primary",text:"",onClick:a[8]||(a[8]=e=>i.showPasswordDialog=!1)},{default:(0,l.k6)((()=>a[20]||(a[20]=[(0,l.eW)("Cerrar")]))),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(v.p,{modelValue:i.showRoleErrorDialog,"onUpdate:modelValue":a[11]||(a[11]=e=>i.showRoleErrorDialog=e),"max-width":"400"},{default:(0,l.k6)((()=>[(0,l.bF)(f.J,null,{default:(0,l.k6)((()=>[(0,l.bF)(p.r,{class:"headline"},{default:(0,l.k6)((()=>a[21]||(a[21]=[(0,l.eW)("Rol Erróneo")]))),_:1}),(0,l.bF)(k.O,null,{default:(0,l.k6)((()=>a[22]||(a[22]=[(0,l.eW)("El rol seleccionado no corresponde al usuario ingresado.")]))),_:1}),(0,l.bF)(g.S,null,{default:(0,l.k6)((()=>[(0,l.bF)(w.h),(0,l.bF)(h.D,{color:"primary",text:"",onClick:a[10]||(a[10]=e=>i.showRoleErrorDialog=!1)},{default:(0,l.k6)((()=>a[23]||(a[23]=[(0,l.eW)("Cerrar")]))),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})}t(4114);var A=t(4373),R={name:"LoginView",data(){return{username:"",password:"",role:"",roles:["Recepcionista","Empleado de Limpieza","Supervisor de Mantenimiento","Gerente de Operaciones"],snackbar:!1,snackbarMessage:"",showErrorDialog:!1,showPasswordDialog:!1,showRoleErrorDialog:!1}},computed:{isAdmin(){return"petra"===this.username.toLowerCase()},userRoleMapping(){return{petra:"Administrador",manuel:"Supervisor de Mantenimiento",edgar:"Recepcionista",luis:"Empleado de Limpieza",wilver:"Gerente de Operaciones"}}},methods:{async login(){const e=this.username.toLowerCase();if(!this.username||!this.password||!this.isAdmin&&!this.role)return this.snackbarMessage="Por favor, completa todos los campos.",void(this.snackbar=!0);if(this.userRoleMapping[e]&&this.userRoleMapping[e]!==(this.isAdmin?"Administrador":this.role))this.showRoleErrorDialog=!0;else try{const a=await A.A.post("https://www.hotelcost.somee.com/api/Users/login",{username:this.username,password:this.password,role:this.isAdmin?"Administrador":this.role});localStorage.setItem("token",a.data.token),localStorage.setItem("loggedInUser",e),localStorage.setItem("userRole",this.isAdmin?"Administrador":this.role),this.$router.push({path:"/home",query:{username:this.username,role:this.isAdmin?"Administrador":this.role}})}catch(a){console.error("❌ Error en login:",a.response||a),this.snackbarMessage=a.response?.data?.message||"Error en autenticación",this.snackbar=!0}}}};const V=(0,n.A)(R,[["render",I],["__scopeId","data-v-627f08f4"]]);var S=V,D=t(144),H=t(3524),W=t(3416),O=t(3462),T=t(9669),U=t(7009),$=t(4718),M=t(9562);const q={class:"d-flex align-center mb-3 pb-2 border-bottom"},N={class:"text-caption grey--text"},P={class:"d-flex justify-space-between align-start w-100"},j={class:"text-body-1 font-weight-medium mb-1 text-primary"},z={class:"d-flex flex-wrap text-caption grey--text"},B={class:"d-flex align-center gap-2"},K={key:1,class:"text-center my-8"},X={class:"d-flex justify-space-between align-center mt-5 pt-3 border-top"},G="https://www.hotelcost.somee.com/api";var J={__name:"NavbarComponent",setup(e){const a=t(3902),o=(0,d.rd)(),s=(0,D.KR)(!1),i=(0,D.KR)(!1),n=(0,D.KR)(localStorage.getItem("loggedInUser")||"Invitado"),r=(0,D.KR)(localStorage.getItem("userRole")||"Sin rol asignado"),c=(0,D.KR)([]),m=(0,D.KR)([]),b={Administrador:[{label:"Habitaciones",path:"/habitaciones"},{label:"Reservaciónes",path:"/resevaciones"},{label:"Clientes",path:"/clientes"},{label:"Tareas",path:"/tareas"},{label:"Informes",path:"/informes"}],"Empleado de Limpieza":[{label:"Tareas",path:"/tareas"}],"Supervisor de Mantenimiento":[{label:"Gestión de Habitaciones",path:"/habitaciones"},{label:"Tareas",path:"/tareas"}],"Gerente de Operaciones":[{label:"Gestión de Habitaciones",path:"/habitaciones"},{label:"Tareas",path:"/tareas"},{label:"Informes",path:"/informes"}],Recepcionista:[{label:"Habitaciones",path:"/habitaciones"},{label:"Reservaciónes",path:"/resevaciones"},{label:"Clientes",path:"/clientes"}]},_=(0,D.KR)(`usuariosfotos/${n.value}.png`);async function y(e){const a=m.value[e];try{await A.A.delete(`${G}/Tareas/${a.numero_Tarea}`),m.value.splice(e,1)}catch(t){console.error("❌ Error al eliminar tarea:",t),alert("Error al eliminar la tarea. Intenta de nuevo.")}}function L(e){e&&e.target&&(e.target.src="usuariosfotos/manuel.png")}function C(e){o.push(e)}function E(){localStorage.removeItem("loggedInUser"),localStorage.removeItem("userRole"),o.push("/")}return(0,l.sV)((async()=>{r.value&&b[r.value]&&(c.value=b[r.value]);const e=localStorage.getItem("loggedInUser")?.trim();if(["Empleado de Limpieza","Supervisor de Mantenimiento","Recepcionista","Gerente de Operaciones"].includes(r.value))try{const a=await A.A.get(`${G}/Tareas/pendientes/${e}`);m.value=a.data||[]}catch(a){console.warn("❌ Error al obtener tareas pendientes:",a.message)}})),(e,t)=>((0,l.uX)(),(0,l.Wv)(H.z,{app:"",color:"#1a1a1a",dark:"",height:"100",class:"custom-navbar"},{default:(0,l.k6)((()=>[(0,l.bF)(F.I,{class:"d-flex align-center justify-center"},{default:(0,l.k6)((()=>[(0,l.bF)(x.y,{src:(0,D.R1)(a),alt:"Logo",height:"75",width:"75",class:"mr-6"},null,8,["src"]),(0,l.bF)(w.h),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(c.value,(e=>((0,l.uX)(),(0,l.Wv)(h.D,{key:e.label,text:"",class:"nav-button",onClick:a=>C(e.path)},{default:(0,l.k6)((()=>[(0,l.eW)((0,u.v_)(e.label),1)])),_:2},1032,["onClick"])))),128)),(0,l.bF)(w.h),(0,l.bF)(h.D,{icon:"",class:"notification-btn",onClick:t[0]||(t[0]=e=>i.value=!0)},{default:(0,l.k6)((()=>[(0,l.bF)(T.w,{size:"30",color:"white"},{default:(0,l.k6)((()=>t[6]||(t[6]=[(0,l.eW)("mdi-bell-outline")]))),_:1}),m.value.length>0?((0,l.uX)(),(0,l.Wv)(O.Q,{key:0,content:m.value.length,color:"red accent-4",overlap:"",bordered:"",class:"notification-badge"},null,8,["content"])):(0,l.Q3)("",!0)])),_:1}),(0,l.bF)(v.p,{modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=e=>i.value=e),"max-width":"560",transition:"scale-transition",persistent:"",scrollable:""},{default:(0,l.k6)((()=>[(0,l.bF)(f.J,{class:"rounded-xl elevation-12 pa-4",style:{background:"#fffdfc"}},{default:(0,l.k6)((()=>[(0,l.Lk)("div",q,[(0,l.Lk)("div",null,[t[7]||(t[7]=(0,l.Lk)("h3",{class:"text-h6 font-weight-bold"},"Tareas Pendientes",-1)),(0,l.Lk)("span",N,(0,u.v_)(m.value.length)+" tareas activas ",1)])]),(0,l.bF)(M.Yt,{group:""},{default:(0,l.k6)((()=>[m.value.length?((0,l.uX)(),(0,l.Wv)(U.x8,{key:0,class:"pa-0"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(m.value,((e,a)=>((0,l.uX)(),(0,l.Wv)($.g,{key:a,class:"rounded-lg mb-3",style:{background:"#f4f5fa"}},{default:(0,l.k6)((()=>[(0,l.Lk)("div",P,[(0,l.Lk)("div",null,[(0,l.Lk)("div",j,(0,u.v_)(e.descripcion),1),(0,l.Lk)("div",z,[(0,l.bF)(T.w,{size:"16",class:"mr-1"},{default:(0,l.k6)((()=>t[8]||(t[8]=[(0,l.eW)("mdi-bed")]))),_:1}),(0,l.eW)(" Hab: "+(0,u.v_)(e.numero_Habitacion)+" ",1),(0,l.bF)(T.w,{size:"16",class:"ml-4 mr-1"},{default:(0,l.k6)((()=>t[9]||(t[9]=[(0,l.eW)("mdi-alert")]))),_:1}),(0,l.eW)(" Prioridad: "+(0,u.v_)(e.nivel_Prioridad),1)])]),(0,l.Lk)("div",B,[(0,l.bF)(h.D,{icon:"",class:"btn-circular gold-icon",onClick:e=>y(a),title:"Marcar como hecha"},{default:(0,l.k6)((()=>[(0,l.bF)(T.w,{color:"#d4af37",size:"26"},{default:(0,l.k6)((()=>t[10]||(t[10]=[(0,l.eW)("mdi-check")]))),_:1})])),_:2},1032,["onClick"])])])])),_:2},1024)))),128))])),_:1})):((0,l.uX)(),(0,l.CE)("div",K,[(0,l.bF)(T.w,{color:"green",size:"48"},{default:(0,l.k6)((()=>t[11]||(t[11]=[(0,l.eW)("mdi-check-all")]))),_:1}),t[12]||(t[12]=(0,l.Lk)("p",{class:"text-subtitle-1 mt-2"},"¡No tienes tareas pendientes!",-1)),t[13]||(t[13]=(0,l.Lk)("p",{class:"text-caption grey--text"},"Disfruta tu tiempo libre ✨",-1))]))])),_:1}),(0,l.Lk)("div",X,[t[15]||(t[15]=(0,l.Lk)("span",{class:"text-caption grey--text"},"Actualizado: justo ahora",-1)),(0,l.bF)(h.D,{onClick:t[1]||(t[1]=e=>i.value=!1),class:"boton-cerrar-gold"},{default:(0,l.k6)((()=>t[14]||(t[14]=[(0,l.eW)(" Cerrar ")]))),_:1})])])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(W.y,{size:"80",class:"profile-avatar",onClick:t[3]||(t[3]=e=>s.value=!0)},{default:(0,l.k6)((()=>[(0,l.bF)(x.y,{src:_.value,alt:"Usuario",onError:L},null,8,["src"])])),_:1}),(0,l.bF)(v.p,{modelValue:s.value,"onUpdate:modelValue":t[5]||(t[5]=e=>s.value=e),"max-width":"400",persistent:""},{default:(0,l.k6)((()=>[(0,l.bF)(f.J,{class:"logout-card rounded-xl"},{default:(0,l.k6)((()=>[(0,l.bF)(p.r,{class:"headline d-flex align-center justify-center"},{default:(0,l.k6)((()=>[(0,l.bF)(x.y,{src:(0,D.R1)(a),alt:"Logo",height:"40",class:"mr-2"},null,8,["src"]),t[16]||(t[16]=(0,l.eW)(" ¿Cerrar sesión? "))])),_:1}),(0,l.bF)(k.O,{class:"text-center"},{default:(0,l.k6)((()=>t[17]||(t[17]=[(0,l.eW)(" Puedes volver a iniciar sesión en cualquier momento. ")]))),_:1}),(0,l.bF)(g.S,{class:"dialog-actions"},{default:(0,l.k6)((()=>[(0,l.bF)(h.D,{class:"dialog-button logout rounded-pill",onClick:E},{default:(0,l.k6)((()=>t[18]||(t[18]=[(0,l.eW)(" Cerrar sesión ")]))),_:1}),(0,l.bF)(h.D,{class:"dialog-button cancel rounded-pill",onClick:t[4]||(t[4]=e=>s.value=!1)},{default:(0,l.k6)((()=>t[19]||(t[19]=[(0,l.eW)(" Cancelar ")]))),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}))}};const Y=(0,n.A)(J,[["__scopeId","data-v-3fc4ce8f"]]);var Q=Y;const Z={class:"background-container"},ee={class:"text-title mb-2"};var ae={__name:"HomeView",setup(e){const a=(0,D.KR)("");(0,l.sV)((()=>{a.value=localStorage.getItem("loggedInUser")||"Usuario"}));const t=(0,l.EW)((()=>{const e=a.value;return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}));return(e,a)=>((0,l.uX)(),(0,l.Wv)(b.E,null,{default:(0,l.k6)((()=>[(0,l.bF)(Q),(0,l.Lk)("div",Z,[(0,l.bF)(f.J,{class:"welcome-card",elevation:"10"},{default:(0,l.k6)((()=>[(0,l.bF)(k.O,{class:"text-center"},{default:(0,l.k6)((()=>[(0,l.Lk)("h2",ee,"¡Bienvenido, "+(0,u.v_)(t.value)+"!",1),a[0]||(a[0]=(0,l.Lk)("p",{class:"text-subtitle"},"Nos alegra tenerte de vuelta en el sistema.",-1))])),_:1})])),_:1})])])),_:1}))}};const te=(0,n.A)(ae,[["__scopeId","data-v-c523cd50"]]);var oe=te,le=t(6756),se=t(5526),ie=t(8477);const ne={class:"d-flex align-center"},re={class:"section-header disponible"},ce={class:"room-number"},de={class:"estado-text"},ue={class:"section-header no-disponible"},me={class:"room-number"},be={class:"estado-text"};function he(e,a,t,o,s,i){const n=(0,l.g2)("v-simple-table");return(0,l.uX)(),(0,l.Wv)(b.E,null,{default:(0,l.k6)((()=>[(0,l.bF)(H.z,{app:"",color:"#1a1a1a",dark:"",height:"100"},{default:(0,l.k6)((()=>[(0,l.bF)(F.I,{fluid:"",class:"d-flex align-center justify-space-between px-6"},{default:(0,l.k6)((()=>[(0,l.bF)(x.y,{src:m,alt:"Logo","max-width":"60"}),a[2]||(a[2]=(0,l.Lk)("h1",{class:"white--text text-h5 font-weight-bold text-center flex-grow-1 mb-0"}," Gestión de Habitaciones ",-1)),(0,l.Lk)("div",ne,[(0,l.bF)(h.D,{class:"btn-historial mr-3",onClick:i.verHistorial},{default:(0,l.k6)((()=>a[0]||(a[0]=[(0,l.eW)(" HISTORIAL DE CAMBIOS ")]))),_:1},8,["onClick"]),(0,l.bF)(h.D,{class:"btn-regresar",onClick:i.goToHome},{default:(0,l.k6)((()=>a[1]||(a[1]=[(0,l.eW)("REGRESAR")]))),_:1},8,["onClick"])])])),_:1})])),_:1}),(0,l.bF)(ie.Y,{class:"habitaciones-container"},{default:(0,l.k6)((()=>[(0,l.bF)(F.I,{fluid:""},{default:(0,l.k6)((()=>[(0,l.bF)(le.L,{dense:"",justify:"center",align:"start",class:"section-row"},{default:(0,l.k6)((()=>[(0,l.bF)(se.B,{cols:"12",md:"5"},{default:(0,l.k6)((()=>[(0,l.bF)(f.J,{class:"section-card pa-6"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",re,[(0,l.bF)(T.w,{left:""},{default:(0,l.k6)((()=>a[3]||(a[3]=[(0,l.eW)("mdi-checkbox-marked-circle")]))),_:1}),(0,l.eW)(" Disponibles ("+(0,u.v_)(i.habitacionesDisponibles.length)+") ",1)]),(0,l.bF)(n,{class:"custom-table larger-table"},{default:(0,l.k6)((()=>[a[4]||(a[4]=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",{class:"header-cell header-title"},"NÚMERO DE HABITACIÓN"),(0,l.Lk)("th",{class:"header-cell header-title"},"ESTADO")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.habitacionesDisponibles,(e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id_Habitacion},[(0,l.Lk)("td",ce,(0,u.v_)(e.numero_Habitacion),1),(0,l.Lk)("td",de,(0,u.v_)(e.estado_Actual),1)])))),128))])])),_:1})])),_:1})])),_:1}),(0,l.bF)(se.B,{cols:"12",md:"5"},{default:(0,l.k6)((()=>[(0,l.bF)(f.J,{class:"section-card pa-6"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",ue,[(0,l.bF)(T.w,{left:""},{default:(0,l.k6)((()=>a[5]||(a[5]=[(0,l.eW)("mdi-close-circle")]))),_:1}),(0,l.eW)(" No disponibles ("+(0,u.v_)(i.habitacionesNoDisponibles.length)+") ",1)]),(0,l.bF)(n,{class:"custom-table larger-table"},{default:(0,l.k6)((()=>[a[6]||(a[6]=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",{class:"header-cell header-title"},"NÚMERO DE HABITACIÓN"),(0,l.Lk)("th",{class:"header-cell header-title"},"ESTADO")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.habitacionesNoDisponibles,(e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id_Habitacion},[(0,l.Lk)("td",me,(0,u.v_)(e.numero_Habitacion),1),(0,l.Lk)("td",be,(0,u.v_)(e.estado_Actual),1)])))),128))])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}t(8992),t(4520);var fe={name:"HabitacionesView",data(){return{habitaciones:[],username:"",role:""}},computed:{habitacionesDisponibles(){return this.habitaciones.filter((e=>"disponible"===e.estado_Actual.toLowerCase()))},habitacionesNoDisponibles(){return this.habitaciones.filter((e=>"disponible"!==e.estado_Actual.toLowerCase()))}},methods:{goToHome(){this.$router.push({path:"/home",query:{username:this.username,role:this.role}})},verHistorial(){this.$router.push({path:"/historial-habitaciones",query:{username:this.username,role:this.role}})},async cargarHabitaciones(){try{const e=await A.A.get("https://hotelcost.somee.com/api/Habitaciones/EstadosActualizados");this.habitaciones=e.data}catch(e){console.error("❌ Error al cargar habitaciones:",e)}}},mounted(){const e=this.$route.query;this.username=e.username||"Invitado",this.role=e.role||"Sin rol asignado",this.cargarHabitaciones()}};const pe=(0,n.A)(fe,[["render",he],["__scopeId","data-v-4049f5e2"]]);var ke=pe,ge=t(3740);function ve(e,a,t,s,i,n){return(0,l.uX)(),(0,l.Wv)(b.E,null,{default:(0,l.k6)((()=>[(0,l.bF)(H.z,{app:"",color:"#1a1a1a",dark:"",height:"100"},{default:(0,l.k6)((()=>[(0,l.bF)(F.I,{fluid:"",class:"navbar-container d-flex align-center justify-space-between px-6"},{default:(0,l.k6)((()=>[(0,l.bF)(x.y,{src:m,alt:"Logo","max-width":"60",contain:"",class:"mr-4"}),a[6]||(a[6]=(0,l.Lk)("div",{class:"navbar-title"},[(0,l.Lk)("span",{class:"white--text font-weight-bold text-h6"},"Gestión de Tareas")],-1)),(0,l.bF)(h.D,{class:"custom-reservar-btn",onClick:n.goToHome},{default:(0,l.k6)((()=>a[5]||(a[5]=[(0,l.eW)("REGRESAR")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,l.bF)(F.I,{fluid:"",class:"d-flex justify-center align-start tareas-fondo"},{default:(0,l.k6)((()=>[(0,l.bF)(f.J,{class:"tarea-card",elevation:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(_.n,{onSubmit:(0,o.D$)(n.actualizarEstado,["prevent"])},{default:(0,l.k6)((()=>[a[8]||(a[8]=(0,l.Lk)("h2",{class:"white--text text-center mb-6"},"Tareas Pendientes y Estado de Habitaciones",-1)),(0,l.bF)(y.d4,{modelValue:i.selectedRoom,"onUpdate:modelValue":a[0]||(a[0]=e=>i.selectedRoom=e),items:i.rooms,"item-title":"nombre","item-value":"numero",label:"Número de Habitación",outlined:"",dense:"",class:"custom-field",required:""},null,8,["modelValue","items"]),(0,l.bF)(y.d4,{modelValue:i.selectedStatus,"onUpdate:modelValue":a[1]||(a[1]=e=>i.selectedStatus=e),items:i.statuses,label:"Estado de la Habitación",outlined:"",dense:"",class:"custom-field",required:""},null,8,["modelValue","items"]),(0,l.bF)(y.d4,{modelValue:i.selectedPriority,"onUpdate:modelValue":a[2]||(a[2]=e=>i.selectedPriority=e),items:i.priorities,label:"Prioridad de la Habitación",outlined:"",dense:"",class:"custom-field",required:""},null,8,["modelValue","items"]),(0,l.bF)(y.d4,{modelValue:i.selectedUser,"onUpdate:modelValue":a[3]||(a[3]=e=>i.selectedUser=e),items:i.asignables,"item-title":"nombre","item-value":"id",label:"Asignar tarea a",outlined:"",dense:"",class:"custom-field",required:""},null,8,["modelValue","items"]),(0,l.bF)(ge.J,{modelValue:i.taskDescription,"onUpdate:modelValue":a[4]||(a[4]=e=>i.taskDescription=e),label:"Descripción de la Tarea",outlined:"",dense:"",rows:"3",class:"custom-field",required:""},null,8,["modelValue"]),(0,l.bF)(h.D,{block:"",class:"custom-reservar-btn mt-6",type:"submit"},{default:(0,l.k6)((()=>a[7]||(a[7]=[(0,l.eW)("ACTUALIZAR ESTADO")]))),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1})}t(2577),t(1454);var _e={name:"TareasView",data(){return{rooms:[],asignables:[],statuses:["En Mantenimiento","Limpieza"],priorities:["Alta","Media","Baja"],selectedRoom:null,selectedStatus:null,selectedPriority:null,selectedUser:null,taskDescription:"",username:"",role:""}},methods:{goToHome(){this.$router.push({path:"/home",query:{username:this.username,role:this.role}})},async obtenerHabitaciones(){try{const e=await A.A.get("https://hotelcost.somee.com/api/Habitaciones/ListaSeleccion");this.rooms=e.data}catch(e){console.error("❌ Error al obtener habitaciones:",e),alert("No se pudieron cargar las habitaciones")}},async obtenerUsuariosAsignables(){try{const e=await A.A.get("https://hotelcost.somee.com/api/Users/Asignables");this.asignables=e.data.map((e=>({id:e.id,nombre:`${e.nombre} (${e.rol})`,username:e.username})))}catch(e){console.error("❌ Error al obtener usuarios asignables:",e),alert("No se pudieron cargar los usuarios asignables")}},async actualizarEstado(){if(!this.selectedRoom||!this.selectedStatus||!this.selectedPriority||!this.selectedUser||!this.taskDescription)return void alert("Por favor, completa todos los campos.");const e=this.asignables.find((e=>e.id===this.selectedUser)),a={numero_Tarea:0,descripcion:this.taskDescription,numero_Habitacion:parseInt(this.selectedRoom),estado_Habitacion:this.selectedStatus,nivel_Prioridad:this.selectedPriority,numero_Asignacion:parseInt(this.selectedUser),usuario_Asignado:e?.username||"desconocido"};try{const e=await A.A.post("https://hotelcost.somee.com/api/Tareas",a);alert(e.data.message||"✅ Tarea guardada correctamente"),this.selectedRoom=null,this.selectedStatus=null,this.selectedPriority=null,this.selectedUser=null,this.taskDescription=""}catch(t){console.error("❌ Error al guardar la tarea:",t),alert("❌ Ocurrió un error al guardar la tarea")}}},mounted(){const e=this.$route.query;this.username=e.username||"Invitado",this.role=e.role||"Sin rol asignado",this.obtenerHabitaciones(),this.obtenerUsuariosAsignables()}};const Fe=(0,n.A)(_e,[["render",ve],["__scopeId","data-v-4eec0f0f"]]);var we=Fe,xe=t(1749),ye=t(6329),Le=t(6503);const Ce={class:"mb-8"},Ee={class:"white--text text-h5"},Ie={class:"white--text text-h5"},Ae={class:"white--text text-h5"},Re={class:"mb-8"};var Ve={__name:"InformesView",setup(e){const a=(0,d.rd)(),t=(0,d.lq)(),s=(0,D.KR)(""),i=(0,D.KR)(""),n=(0,D.KR)(0),r=(0,D.KR)(0),c=(0,D.KR)(""),p=(0,D.KR)(""),k=(0,D.KR)(""),L=(0,D.KR)(null),E=(0,D.KR)(!1),I=(0,D.KR)(""),R=(0,D.KR)([]),V=[{text:"Tipo",value:"tipoInforme",sortable:!1,class:"white--text"},{text:"Mes",value:"mes",sortable:!1,class:"white--text"},{text:"Generado",value:"generadoEl",sortable:!1,class:"white--text"},{text:"Usuario",value:"usuario",sortable:!1,class:"white--text"},{text:"Acciones",value:"acciones",sortable:!1,class:"white--text"}],S=()=>{a.push({path:"/home",query:{username:s.value||"Invitado",role:i.value||"Sin rol asignado"}})},W=()=>{const e={year:"numeric",month:"long"};k.value=new Intl.DateTimeFormat("es-ES",e).format(new Date(L.value))},O=()=>{W(),E.value=!1},U=async()=>{try{const{data:e}=await A.A.get("https://localhost:7239/api/informes/resumen-general");n.value=e.porcentajeOcupacion,r.value=e.ingresosMensuales,c.value=e.rendimiento}catch(e){console.error(e)}},$=async()=>{try{const{data:e}=await A.A.get("https://localhost:7239/api/informes");R.value=e.map((e=>({...e,generadoEl:new Date(e.generadoEl).toLocaleDateString("es-ES")})))}catch(e){console.error(e)}},M=async()=>{if(!p.value||!k.value)return alert("Selecciona tipo y mes.");const e={tipoInforme:p.value,mes:k.value,generadoEl:(new Date).toISOString(),usuario:s.value||"Invitado",comentario:I.value};try{await A.A.post("https://localhost:7239/api/informes",e),await $(),alert("Informe generado."),p.value="",k.value="",I.value=""}catch(a){console.error(a),alert("Error al generar informe.")}},q=async e=>{if(confirm("¿Eliminar este informe?"))try{await A.A.delete(`https://localhost:7239/api/informes/${e}`),await $(),alert("Informe eliminado.")}catch(a){console.error(a),alert("Error al eliminar informe.")}},N=e=>{const a=new xe.Ay,t=new Image;t.src=m,t.onload=()=>{a.addImage(t,"PNG",160,10,30,30),a.setFontSize(16),a.text("Reporte de Hotel",20,30),a.setFontSize(12),a.text(`Tipo: ${e.tipoInforme}`,20,50),a.text(`Mes: ${e.mes}`,20,60),a.text(`Generado el: ${e.generadoEl}`,20,70),a.text(`Usuario: ${e.usuario}`,20,80),e.comentario&&a.text(`Comentario: ${e.comentario}`,20,90);let o=105;switch(e.tipoInforme){case"Ingresos":a.text(`Ingresos: $${r.value}`,20,o);break;case"Ocupación":a.text(`Ocupación: ${n.value}%`,20,o);break;case"Rendimiento":a.text(`Rendimiento: ${c.value}`,20,o);break;case"Total":a.text("Informe Total:",20,o),a.text(`• Ingresos: $${r.value}`,25,o+10),a.text(`• Ocupación: ${n.value}%`,25,o+20),a.text(`• Rendimiento: ${c.value}`,25,o+30);break}a.save(`Informe_${e.tipoInforme}_${e.mes}.pdf`)}};return(0,l.sV)((()=>{t.query.username?(s.value=t.query.username,localStorage.setItem("loggedInUser",s.value)):s.value=localStorage.getItem("loggedInUser")||"",t.query.role?(i.value=t.query.role,localStorage.setItem("userRole",i.value)):i.value=localStorage.getItem("userRole")||"",U(),$()})),(e,a)=>((0,l.uX)(),(0,l.Wv)(b.E,null,{default:(0,l.k6)((()=>[(0,l.bF)(H.z,{app:"",color:"#1a1a1a",dark:"",height:"100"},{default:(0,l.k6)((()=>[(0,l.bF)(F.I,{fluid:"",class:"d-flex align-center justify-space-between px-6"},{default:(0,l.k6)((()=>[(0,l.bF)(x.y,{src:m,alt:"Logo","max-width":"60",contain:""}),a[7]||(a[7]=(0,l.Lk)("div",{class:"flex-grow-1 text-center"},[(0,l.Lk)("span",{class:"white--text font-weight-bold text-h6"},"Panel de Informes")],-1)),(0,l.bF)(h.D,{class:"custom-reservar-btn",onClick:S},{default:(0,l.k6)((()=>a[6]||(a[6]=[(0,l.eW)("REGRESAR")]))),_:1})])),_:1})])),_:1}),(0,l.bF)(ie.Y,{class:"informes-fondo"},{default:(0,l.k6)((()=>[(0,l.bF)(F.I,{fluid:"",class:"d-flex justify-center py-8"},{default:(0,l.k6)((()=>[(0,l.bF)(f.J,{class:"registro-card pa-6",elevation:"12","max-width":"1000"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",Ce,[a[11]||(a[11]=(0,l.Lk)("h2",{class:"white--text text-h6 font-weight-medium text-center mb-4"}," Resumen General ",-1)),(0,l.bF)(le.L,{dense:"",justify:"space-around"},{default:(0,l.k6)((()=>[(0,l.bF)(se.B,{cols:"12",md:"3"},{default:(0,l.k6)((()=>[(0,l.bF)(f.J,{class:"stats-card"},{default:(0,l.k6)((()=>[a[8]||(a[8]=(0,l.Lk)("h3",{class:"white--text mb-2"},"Ocupación Total",-1)),(0,l.Lk)("p",Ee,(0,u.v_)(n.value)+"%",1)])),_:1})])),_:1}),(0,l.bF)(se.B,{cols:"12",md:"3"},{default:(0,l.k6)((()=>[(0,l.bF)(f.J,{class:"stats-card"},{default:(0,l.k6)((()=>[a[9]||(a[9]=(0,l.Lk)("h3",{class:"white--text mb-2"},"Ingresos Mensuales",-1)),(0,l.Lk)("p",Ie,"$"+(0,u.v_)(r.value),1)])),_:1})])),_:1}),(0,l.bF)(se.B,{cols:"12",md:"3"},{default:(0,l.k6)((()=>[(0,l.bF)(f.J,{class:"stats-card"},{default:(0,l.k6)((()=>[a[10]||(a[10]=(0,l.Lk)("h3",{class:"white--text mb-2"},"Rendimiento Mensual",-1)),(0,l.Lk)("p",Ae,(0,u.v_)(c.value),1)])),_:1})])),_:1})])),_:1})]),(0,l.Lk)("div",Re,[a[14]||(a[14]=(0,l.Lk)("h2",{class:"white--text text-h6 font-weight-medium text-center mb-4"}," Generar Informes ",-1)),(0,l.bF)(_.n,{onSubmit:(0,o.D$)(M,["prevent"])},{default:(0,l.k6)((()=>[(0,l.bF)(le.L,{dense:""},{default:(0,l.k6)((()=>[(0,l.bF)(se.B,{cols:"12",md:"4"},{default:(0,l.k6)((()=>[(0,l.bF)(y.d4,{modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=e=>p.value=e),items:["Ocupación","Ingresos","Rendimiento","Total"],label:"Tipo de Informe",outlined:"",dense:"",required:"",class:"custom-field"},null,8,["modelValue"])])),_:1}),(0,l.bF)(se.B,{cols:"12",md:"4"},{default:(0,l.k6)((()=>[(0,l.bF)(C.W,{modelValue:k.value,"onUpdate:modelValue":a[1]||(a[1]=e=>k.value=e),label:"Mes",readonly:"",onClick:a[2]||(a[2]=e=>E.value=!0),outlined:"",dense:"",required:"",class:"custom-field"},null,8,["modelValue"]),(0,l.bF)(v.p,{modelValue:E.value,"onUpdate:modelValue":a[4]||(a[4]=e=>E.value=e),"max-width":"290"},{default:(0,l.k6)((()=>[(0,l.bF)(f.J,null,{default:(0,l.k6)((()=>[(0,l.bF)(Le.f,{modelValue:L.value,"onUpdate:modelValue":a[3]||(a[3]=e=>L.value=e),type:"month",locale:"es"},null,8,["modelValue"]),(0,l.bF)(g.S,null,{default:(0,l.k6)((()=>[(0,l.bF)(w.h),(0,l.bF)(h.D,{text:"",color:"primary",onClick:O},{default:(0,l.k6)((()=>a[12]||(a[12]=[(0,l.eW)("Aceptar")]))),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(se.B,{cols:"12",md:"4"},{default:(0,l.k6)((()=>[(0,l.bF)(ge.J,{modelValue:I.value,"onUpdate:modelValue":a[5]||(a[5]=e=>I.value=e),label:"Comentario",outlined:"",dense:"",rows:"1",class:"custom-field"},null,8,["modelValue"])])),_:1}),(0,l.bF)(se.B,{cols:"12",class:"text-center mt-4"},{default:(0,l.k6)((()=>[(0,l.bF)(h.D,{type:"submit",block:"",class:"custom-reservar-btn"},{default:(0,l.k6)((()=>a[13]||(a[13]=[(0,l.eW)(" Generar Informe ")]))),_:1})])),_:1})])),_:1})])),_:1})]),(0,l.Lk)("div",null,[a[17]||(a[17]=(0,l.Lk)("h2",{class:"white--text text-h6 font-weight-medium text-center mb-4"}," Informes Recientes ",-1)),(0,l.bF)(ye.Py,{headers:V,items:R.value,dense:"","hide-default-footer":"",class:"transparent-table"},{"item.acciones":(0,l.k6)((({item:e})=>[(0,l.bF)(h.D,{icon:"",small:"",onClick:a=>N(e)},{default:(0,l.k6)((()=>[(0,l.bF)(T.w,{color:"yellow"},{default:(0,l.k6)((()=>a[15]||(a[15]=[(0,l.eW)("mdi-download")]))),_:1})])),_:2},1032,["onClick"]),(0,l.bF)(h.D,{icon:"",small:"",onClick:a=>q(e.id)},{default:(0,l.k6)((()=>[(0,l.bF)(T.w,{color:"red"},{default:(0,l.k6)((()=>a[16]||(a[16]=[(0,l.eW)("mdi-delete")]))),_:1})])),_:2},1032,["onClick"])])),_:1},8,["items"])])])),_:1})])),_:1})])),_:1})])),_:1}))}};const Se=(0,n.A)(Ve,[["__scopeId","data-v-049d278c"]]);var De=Se,He=t(7511);function We(e,a,t,s,i,n){return(0,l.uX)(),(0,l.Wv)(b.E,null,{default:(0,l.k6)((()=>[(0,l.bF)(H.z,{app:"",color:"#1a1a1a",dark:"",height:"100"},{default:(0,l.k6)((()=>[(0,l.bF)(F.I,{fluid:"",class:"d-flex align-center justify-space-between px-6"},{default:(0,l.k6)((()=>[(0,l.bF)(x.y,{src:m,alt:"Logo","max-width":"55"}),a[6]||(a[6]=(0,l.Lk)("h1",{class:"white--text text-h5 font-weight-bold flex-grow-1 text-center mb-0"}," Registro de Clientes ",-1)),(0,l.bF)(h.D,{class:"regresar-btn",onClick:n.goToHome},{default:(0,l.k6)((()=>a[5]||(a[5]=[(0,l.eW)("REGRESAR")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,l.bF)(ie.Y,{class:"registro-container"},{default:(0,l.k6)((()=>[(0,l.bF)(F.I,{fluid:"",class:"d-flex justify-center"},{default:(0,l.k6)((()=>[(0,l.bF)(f.J,{class:"registro-card",elevation:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(p.r,{class:"registro-header text-h6 font-weight-medium text-center justify-center"},{default:(0,l.k6)((()=>a[7]||(a[7]=[(0,l.eW)(" Nuevo Cliente ")]))),_:1}),(0,l.bF)(He.G),(0,l.bF)(k.O,null,{default:(0,l.k6)((()=>[(0,l.bF)(_.n,{onSubmit:(0,o.D$)(n.registrarCliente,["prevent"]),ref:"form"},{default:(0,l.k6)((()=>[(0,l.bF)(le.L,{class:"form-row d-flex flex-column align-center",dense:""},{default:(0,l.k6)((()=>[(0,l.bF)(se.B,{cols:"12",md:"6"},{default:(0,l.k6)((()=>[(0,l.bF)(C.W,{modelValue:i.nombre,"onUpdate:modelValue":a[0]||(a[0]=e=>i.nombre=e),label:"Nombre","prepend-inner-icon":"mdi-account",outlined:"",dense:"",clearable:"",required:""},null,8,["modelValue"])])),_:1}),(0,l.bF)(se.B,{cols:"12",md:"6"},{default:(0,l.k6)((()=>[(0,l.bF)(C.W,{modelValue:i.apellido,"onUpdate:modelValue":a[1]||(a[1]=e=>i.apellido=e),label:"Apellido","prepend-inner-icon":"mdi-account-outline",outlined:"",dense:"",clearable:"",required:""},null,8,["modelValue"])])),_:1}),(0,l.bF)(se.B,{cols:"12",md:"6"},{default:(0,l.k6)((()=>[(0,l.bF)(C.W,{modelValue:i.telefono,"onUpdate:modelValue":a[2]||(a[2]=e=>i.telefono=e),label:"Teléfono","prepend-inner-icon":"mdi-phone",outlined:"",dense:"",clearable:"",rules:[e=>/^\\d{10}$/.test(e)||"Debe tener 10 dígitos"],required:""},null,8,["modelValue","rules"])])),_:1}),(0,l.bF)(se.B,{cols:"12",md:"6"},{default:(0,l.k6)((()=>[(0,l.bF)(C.W,{modelValue:i.correo,"onUpdate:modelValue":a[3]||(a[3]=e=>i.correo=e),label:"Correo Electrónico","prepend-inner-icon":"mdi-email",outlined:"",dense:"",clearable:"",type:"email",rules:[e=>/.+@.+\\..+/.test(e)||"Email inválido"],required:""},null,8,["modelValue","rules"])])),_:1}),(0,l.bF)(se.B,{cols:"12",class:"text-center mt-4"},{default:(0,l.k6)((()=>[(0,l.bF)(h.D,{type:"submit",class:"submit-btn",large:""},{default:(0,l.k6)((()=>a[8]||(a[8]=[(0,l.eW)("REGISTRAR CLIENTE")]))),_:1})])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1}),(0,l.bF)(L.K,{modelValue:i.snackbar,"onUpdate:modelValue":a[4]||(a[4]=e=>i.snackbar=e),timeout:3e3,color:i.snackbarColor},{default:(0,l.k6)((()=>[(0,l.eW)((0,u.v_)(i.snackbarMessage),1)])),_:1},8,["modelValue","color"])])),_:1})])),_:1})])),_:1})])),_:1})}var Oe={name:"RegistroCliente",data(){return{nombre:"",apellido:"",telefono:"",correo:"",snackbar:!1,snackbarMessage:"",snackbarColor:"green"}},methods:{goToHome(){this.$router.push({path:"/home",query:this.$route.query})},async registrarCliente(){if(!this.$refs.form.validate())return;const e={nombre:this.nombre,apellido:this.apellido,numero:this.telefono,correo:this.correo};try{const{data:a}=await A.A.post("https://hotelcost.somee.com/api/Clientes",e);this.snackbarMessage=a.message||"Cliente registrado con éxito",this.snackbarColor="green"}catch{this.snackbarMessage="Error al registrar cliente",this.snackbarColor="red"}finally{this.snackbar=!0,this.nombre=this.apellido=this.telefono=this.correo="",this.$refs.form.reset()}}},mounted(){const{username:e,role:a}=this.$route.query;this.usuario=e||"Invitado",this.role=a||"Sin rol asignado"}};const Te=(0,n.A)(Oe,[["render",We],["__scopeId","data-v-5c5c7e2f"]]);var Ue=Te;const $e={class:"card-header form-header"},Me={class:"card-header occupied-header"},qe={class:"mt-4"};function Ne(e,a,t,s,i,n){return(0,l.uX)(),(0,l.Wv)(b.E,null,{default:(0,l.k6)((()=>[(0,l.bF)(H.z,{app:"",color:"#1a1a1a",dark:"",height:"80"},{default:(0,l.k6)((()=>[(0,l.bF)(F.I,{fluid:"",class:"pa-0"},{default:(0,l.k6)((()=>[(0,l.bF)(le.L,{"no-gutters":"",align:"center"},{default:(0,l.k6)((()=>[(0,l.bF)(se.B,{cols:"2",class:"d-flex align-center"},{default:(0,l.k6)((()=>[(0,l.bF)(x.y,{src:m,alt:"Logo",contain:"",height:"60"})])),_:1}),(0,l.bF)(se.B,{cols:"8",class:"text-center"},{default:(0,l.k6)((()=>a[8]||(a[8]=[(0,l.Lk)("h2",{class:"white--text m-0"},"Registro de Reservas",-1)]))),_:1}),(0,l.bF)(se.B,{cols:"1",class:"d-flex justify-end"},{default:(0,l.k6)((()=>[(0,l.bF)(h.D,{class:"back-button",onClick:n.goToHome},{default:(0,l.k6)((()=>a[9]||(a[9]=[(0,l.eW)("REGRESAR")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.bF)(ie.Y,{class:"reservas-main pa-0"},{default:(0,l.k6)((()=>[(0,l.bF)(F.I,{fluid:"",class:"pa-0"},{default:(0,l.k6)((()=>[(0,l.bF)(le.L,{"no-gutters":"",justify:"center",align:"start",class:"cards-wrapper"},{default:(0,l.k6)((()=>[(0,l.bF)(se.B,{cols:"12",md:"5",class:"px-4"},{default:(0,l.k6)((()=>[(0,l.bF)(f.J,{class:"gest-card"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",$e,[(0,l.bF)(T.w,{left:""},{default:(0,l.k6)((()=>a[10]||(a[10]=[(0,l.eW)("mdi-calendar-plus")]))),_:1}),a[11]||(a[11]=(0,l.Lk)("span",null,"Reservación",-1))]),(0,l.bF)(k.O,null,{default:(0,l.k6)((()=>[(0,l.bF)(_.n,{onSubmit:(0,o.D$)(n.abrirConfirmacion,["prevent"])},{default:(0,l.k6)((()=>[(0,l.bF)(y.d4,{modelValue:i.cliente,"onUpdate:modelValue":a[0]||(a[0]=e=>i.cliente=e),items:i.clientes,"item-title":"nombreCompleto","item-value":"id",label:"Cliente",outlined:"",dense:"",required:"",class:"input-field"},null,8,["modelValue","items"]),(0,l.bF)(C.W,{modelValue:i.fechaInicio,"onUpdate:modelValue":a[1]||(a[1]=e=>i.fechaInicio=e),label:"Fecha de Inicio",type:"date",min:i.today,outlined:"",dense:"",required:"",class:"input-field"},null,8,["modelValue","min"]),(0,l.bF)(C.W,{modelValue:i.fechaFin,"onUpdate:modelValue":a[2]||(a[2]=e=>i.fechaFin=e),label:"Fecha de Fin",type:"date",min:i.fechaInicio||i.today,outlined:"",dense:"",required:"",class:"input-field"},null,8,["modelValue","min"]),(0,l.bF)(y.d4,{modelValue:i.estado,"onUpdate:modelValue":a[3]||(a[3]=e=>i.estado=e),items:i.estados,label:"Estado",outlined:"",dense:"",required:"",class:"input-field"},null,8,["modelValue","items"]),(0,l.bF)(y.d4,{modelValue:i.habitacion,"onUpdate:modelValue":[a[4]||(a[4]=e=>i.habitacion=e),n.actualizarTipo],items:i.habitaciones,"item-title":"habitacionDisplay","item-value":"id_Habitacion",label:"Habitación Disponible",outlined:"",dense:"",required:"",class:"input-field"},null,8,["modelValue","items","onUpdate:modelValue"]),(0,l.bF)(h.D,{block:"",type:"submit",class:"register-button mt-6",large:""},{default:(0,l.k6)((()=>a[12]||(a[12]=[(0,l.eW)("Reservar")]))),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1}),(0,l.bF)(se.B,{cols:"12",md:"6",class:"px-4"},{default:(0,l.k6)((()=>[(0,l.bF)(f.J,{class:"gest-card"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",Me,[(0,l.bF)(T.w,{left:""},{default:(0,l.k6)((()=>a[13]||(a[13]=[(0,l.eW)("mdi-bed-outline")]))),_:1}),(0,l.Lk)("span",null,"Habitaciones Ocupadas ("+(0,u.v_)(i.habitacionesOcupadas.length)+")",1)]),(0,l.bF)(k.O,{class:"pa-0"},{default:(0,l.k6)((()=>[(0,l.bF)(ye.Py,{headers:i.headersOcupadas,items:i.habitacionesOcupadas,class:"elevation-1","hide-default-header":"","hide-default-footer":"",dense:""},{"item.costo":(0,l.k6)((({item:e})=>[(0,l.eW)(" $"+(0,u.v_)(e.costo.toLocaleString("es-MX")),1)])),_:1},8,["headers","items"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.bF)(v.p,{modelValue:i.confirmacionDialog,"onUpdate:modelValue":a[6]||(a[6]=e=>i.confirmacionDialog=e),"max-width":"500"},{default:(0,l.k6)((()=>[(0,l.bF)(f.J,null,{default:(0,l.k6)((()=>[(0,l.bF)(p.r,{class:"text-h5 font-weight-bold"},{default:(0,l.k6)((()=>a[14]||(a[14]=[(0,l.eW)("Confirmar Reserva")]))),_:1}),(0,l.bF)(k.O,null,{default:(0,l.k6)((()=>[(0,l.Lk)("p",null,[a[15]||(a[15]=(0,l.Lk)("strong",null,"Cliente:",-1)),(0,l.eW)(" "+(0,u.v_)(i.nombreClienteSeleccionado),1)]),(0,l.Lk)("p",null,[a[16]||(a[16]=(0,l.Lk)("strong",null,"Habitación:",-1)),(0,l.eW)(" "+(0,u.v_)(i.habitacionSeleccionada?.numero_Habitacion)+" - "+(0,u.v_)(i.tipoSeleccionado),1)]),(0,l.Lk)("p",null,[a[17]||(a[17]=(0,l.Lk)("strong",null,"Estado:",-1)),(0,l.eW)(" "+(0,u.v_)(i.estado),1)]),(0,l.Lk)("p",null,[a[18]||(a[18]=(0,l.Lk)("strong",null,"Desde:",-1)),(0,l.eW)(" "+(0,u.v_)(i.fechaInicio),1)]),(0,l.Lk)("p",null,[a[19]||(a[19]=(0,l.Lk)("strong",null,"Hasta:",-1)),(0,l.eW)(" "+(0,u.v_)(i.fechaFin),1)]),(0,l.Lk)("p",qe,[a[20]||(a[20]=(0,l.eW)(" Total a pagar: ")),(0,l.Lk)("strong",null,"$"+(0,u.v_)(i.costoTotal),1)])])),_:1}),(0,l.bF)(g.S,null,{default:(0,l.k6)((()=>[(0,l.bF)(w.h),(0,l.bF)(h.D,{text:"",onClick:n.confirmarReserva},{default:(0,l.k6)((()=>a[21]||(a[21]=[(0,l.eW)("Pagar y Reservar")]))),_:1},8,["onClick"]),(0,l.bF)(h.D,{text:"",onClick:a[5]||(a[5]=e=>i.confirmacionDialog=!1)},{default:(0,l.k6)((()=>a[22]||(a[22]=[(0,l.eW)("Cancelar")]))),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(L.K,{modelValue:i.snackbar,"onUpdate:modelValue":a[7]||(a[7]=e=>i.snackbar=e),timeout:"3000",color:"green"},{default:(0,l.k6)((()=>[(0,l.eW)((0,u.v_)(i.snackbarMessage),1)])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})}var Pe={name:"RegistroReservas",data(){return{username:"",role:"",cliente:null,clientes:[],fechaInicio:"",fechaFin:"",estado:"",habitacion:null,habitaciones:[],habitacionesOcupadas:[],headersOcupadas:[{text:"Habitación",value:"numero_Habitacion"},{text:"Estado",value:"estado_Actual"},{text:"Tipo",value:"tipo_Habitacion"},{text:"Precio",value:"costo"},{text:"Cliente",value:"nombreCliente"}],estados:["Pendiente","Confirmada","Cancelada"],confirmacionDialog:!1,tipoHabitacion:"",costoTotal:0,snackbar:!1,snackbarMessage:"",today:new Date((new Date).getTime()-6e4*(new Date).getTimezoneOffset()).toISOString().split("T")[0],tipoSeleccionado:"",habitacionSeleccionada:null,nombreClienteSeleccionado:""}},methods:{goToHome(){this.$router.push({path:"/home",query:{username:this.username,role:this.role}})},async cargarHabitacionesDisponibles(){try{const e=await A.A.get("https://hotelcost.somee.com/api/Habitaciones/EstadosActualizados");this.habitaciones=e.data.filter((e=>"disponible"===e.estado_Actual.toLowerCase())).map((e=>({...e,habitacionDisplay:`#${e.numero_Habitacion} - ${e.tipo_Habitacion}`})))}catch(e){console.error("Error al obtener disponibles:",e)}},actualizarTipo(e){const a=this.habitaciones.find((a=>a.id_Habitacion===e));if(a){this.habitacionSeleccionada=a,this.tipoSeleccionado=a.tipo_Habitacion;const e={Sencilla:3500,Doble:8e3,Suite:18e3};this.costoTotal=e[a.tipo_Habitacion]||0}},async cargarHabitacionesOcupadas(){try{const e=await A.A.get("https://hotelcost.somee.com/api/Reservacion/OcupadasConCliente");this.habitacionesOcupadas=e.data}catch(e){console.error("Error al obtener ocupadas:",e)}},async cargarClientes(){try{const e=await A.A.get("https://hotelcost.somee.com/api/Clientes"),a=this.habitacionesOcupadas.map((e=>e.nombreCliente?.toLowerCase()));this.clientes=e.data.map((e=>({id:e.id,nombreCompleto:`${e.nombre} ${e.apellido}`}))).filter((e=>!a.includes(e.nombreCompleto.toLowerCase())))}catch(e){console.error("Error al obtener clientes:",e)}},abrirConfirmacion(){if(!this.cliente||!this.fechaInicio||!this.fechaFin||!this.estado||!this.habitacion)return this.snackbarMessage="Por favor, completa todos los campos.",void(this.snackbar=!0);const e=this.clientes.find((e=>e.id===this.cliente));this.nombreClienteSeleccionado=e?e.nombreCompleto:"",this.confirmacionDialog=!0},confirmarReserva(){if(!this.habitacionSeleccionada)return this.snackbarMessage="Habitación no válida.",void(this.snackbar=!0);const e={Numero_Habitacion:this.habitacionSeleccionada.numero_Habitacion,Numero_Cliente:this.cliente,FechaInicio:this.fechaInicio,FechaFinal:this.fechaFin,EstadoReserva:this.estado,Costo:this.costoTotal};A.A.post("https://hotelcost.somee.com/api/Reservacion",e).then((()=>A.A.put("https://hotelcost.somee.com/api/Habitaciones/ActualizarEstado",{Numero_Habitacion:this.habitacionSeleccionada.numero_Habitacion,Estado_Actual:"Ocupada"}))).then((()=>{this.snackbarMessage="Reserva registrada con éxito.",this.snackbar=!0,this.confirmacionDialog=!1,this.resetFormulario(),this.cargarHabitacionesOcupadas()})).catch((e=>{console.error("❌ Error al registrar reserva:",e),this.snackbarMessage="Error al registrar la reserva.",this.snackbar=!0}))},resetFormulario(){this.cliente=null,this.fechaInicio="",this.fechaFin="",this.estado="",this.habitacion=null,this.tipoHabitacion="",this.costoTotal=0,this.cargarHabitacionesDisponibles(),this.habitacionSeleccionada=null,this.tipoSeleccionado="",this.nombreClienteSeleccionado=""}},mounted(){const e=this.$route.query;this.username=e.username||"Invitado",this.role=e.role||"Sin rol asignado",this.cargarHabitacionesDisponibles(),this.cargarHabitacionesOcupadas(),this.cargarClientes()}};const je=(0,n.A)(Pe,[["render",Ne],["__scopeId","data-v-4780aee2"]]);var ze=je;const Be={key:0,class:"text-center text-grey--text"};function Ke(e,a,t,o,s,i){return(0,l.uX)(),(0,l.Wv)(b.E,null,{default:(0,l.k6)((()=>[(0,l.bF)(H.z,{app:"",color:"#1a1a1a",dark:""},{default:(0,l.k6)((()=>[(0,l.bF)(F.I,{fluid:"",class:"d-flex align-center justify-space-between px-6"},{default:(0,l.k6)((()=>[(0,l.bF)(x.y,{src:m,alt:"Logo","max-width":"60"}),a[1]||(a[1]=(0,l.Lk)("h1",{class:"white--text text-h6 font-weight-bold mb-0"}," Historial de Habitaciones Reservadas ",-1)),(0,l.bF)(h.D,{class:"btn-regresar",onClick:i.goBack},{default:(0,l.k6)((()=>a[0]||(a[0]=[(0,l.eW)("REGRESAR")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,l.bF)(ie.Y,{class:"historial-container"},{default:(0,l.k6)((()=>[(0,l.bF)(F.I,null,{default:(0,l.k6)((()=>[(0,l.bF)(f.J,{elevation:"8",class:"pa-4"},{default:(0,l.k6)((()=>[a[11]||(a[11]=(0,l.Lk)("h2",{class:"text-h6 font-weight-bold text-center mb-4"}," Historial de Habitaciones Reservadas ",-1)),0===s.historial.length?((0,l.uX)(),(0,l.CE)("div",Be," No hay datos en el historial. ")):((0,l.uX)(),(0,l.Wv)(ye.Py,{key:1,headers:s.headers,items:s.historial,class:"elevation-1 historial-table",dense:"","sort-by":["fecha_Cambio"],"sort-desc":[!0],"items-per-page":10},{"item.id_Habitacion":(0,l.k6)((({item:e})=>[a[2]||(a[2]=(0,l.Lk)("span",{class:"font-weight-bold"},"ID:",-1)),(0,l.eW)(" "+(0,u.v_)(e.id_Habitacion||"N/A"),1)])),"item.numero_Habitacion":(0,l.k6)((({item:e})=>[a[3]||(a[3]=(0,l.Lk)("span",{class:"font-weight-bold"},"Habitación:",-1)),(0,l.eW)(" "+(0,u.v_)(e.numero_Habitacion||"N/A"),1)])),"item.fecha_Entrada":(0,l.k6)((({item:e})=>[(0,l.Lk)("div",null,[a[4]||(a[4]=(0,l.Lk)("span",{class:"font-weight-bold"},"Entrada:",-1)),a[5]||(a[5]=(0,l.Lk)("br",null,null,-1)),(0,l.eW)(" "+(0,u.v_)(i.formatDate(e.fecha_Entrada)||"N/A"),1)])])),"item.fecha_Salida":(0,l.k6)((({item:e})=>[(0,l.Lk)("div",null,[a[6]||(a[6]=(0,l.Lk)("span",{class:"font-weight-bold"},"Salida:",-1)),a[7]||(a[7]=(0,l.Lk)("br",null,null,-1)),(0,l.eW)(" "+(0,u.v_)(i.formatDate(e.fecha_Salida)||"N/A"),1)])])),"item.fecha_Cambio":(0,l.k6)((({item:e})=>[(0,l.Lk)("div",null,[a[8]||(a[8]=(0,l.Lk)("span",{class:"font-weight-bold"},"Reserva:",-1)),a[9]||(a[9]=(0,l.Lk)("br",null,null,-1)),(0,l.eW)(" "+(0,u.v_)(i.formatDate(e.fecha_Cambio)||"N/A"),1)])])),"item.usuario_Modificacion":(0,l.k6)((({item:e})=>[a[10]||(a[10]=(0,l.Lk)("span",{class:"font-weight-bold"},"Usuario:",-1)),(0,l.eW)(" "+(0,u.v_)(e.usuario_Modificacion||"N/A"),1)])),_:1},8,["headers","items"]))])),_:1})])),_:1})])),_:1})])),_:1})}var Xe={name:"HistorialHabitacionesView",data(){return{historial:[],headers:[{text:"ID Habitación",value:"id_Habitacion",width:"120px"},{text:"Número",value:"numero_Habitacion",width:"120px"},{text:"Fechas de Estancia",value:"fecha_Entrada",width:"200px"},{text:"Fecha de Salida",value:"fecha_Salida",width:"200px"},{text:"Fecha de Reserva",value:"fecha_Cambio",width:"200px"},{text:"Usuario",value:"usuario_Modificacion",width:"150px"}]}},methods:{goBack(){this.$router.push({path:"/habitaciones",query:{username:this.$route.query.username,role:this.$route.query.role}})},async cargarHistorial(){try{const e=await A.A.get("https://localhost:7239/api/Reservacion/HistorialReservas");console.log("Datos recibidos:",e.data),this.historial=e.data.map((e=>({...e,id_Habitacion:e.id_Habitacion||"N/A",numero_Habitacion:e.numero_Habitacion||"N/A",usuario_Modificacion:e.usuario_Modificacion||"Usuario no especificado"})))}catch(e){console.error("❌ Error al cargar historial:",e)}},formatDate(e){if(!e)return"N/A";const a=new Date(e);return isNaN(a.getTime())?"Fecha inválida":a.toLocaleString("es-MX",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}},mounted(){this.cargarHistorial()}};const Ge=(0,n.A)(Xe,[["render",Ke],["__scopeId","data-v-b1eb2624"]]);var Je=Ge;const Ye=[{path:"/",name:"Login",component:S},{path:"/home",name:"Home",component:oe},{path:"/habitaciones",name:"Habitaciones",component:ke},{path:"/tareas",name:"Tareas",component:we},{path:"/informes",name:"Informes",component:De},{path:"/historial-habitaciones",name:"Historial",component:Je},{path:"/clientes",name:"Cliente",component:Ue},{path:"/resevaciones",name:"Reservaciones",component:ze}],Qe=(0,d.aE)({history:(0,d.Bt)(),routes:Ye});var Ze=Qe,ea=(t(5524),t(7768)),aa=t(8221),ta=t(8253),oa=t(4818),la=t(9130);const sa=(0,ea.$N)({icons:{defaultSet:"mdi",aliases:aa.z,sets:{mdi:aa.r}}}),ia=(0,o.Ef)(c);console.log("🟢 App iniciando..."),ia.use(Ze),ia.use(sa),ia.use(ta.Ay),ia.component("PvAvatar",la.A),ia.component("PrimeGalleria",oa.A);try{ia.mount("#app"),console.log("✅ App montada correctamente")}catch(na){console.error("❌ Error al montar la app:",na)}},3902:function(e,a,t){e.exports=t.p+"img/logotiopo.f578479b.png"}},a={};function t(o){var l=a[o];if(void 0!==l)return l.exports;var s=a[o]={exports:{}};return e[o].call(s.exports,s,s.exports,t),s.exports}t.m=e,function(){var e=[];t.O=function(a,o,l,s){if(!o){var i=1/0;for(d=0;d<e.length;d++){o=e[d][0],l=e[d][1],s=e[d][2];for(var n=!0,r=0;r<o.length;r++)(!1&s||i>=s)&&Object.keys(t.O).every((function(e){return t.O[e](o[r])}))?o.splice(r--,1):(n=!1,s<i&&(i=s));if(n){e.splice(d--,1);var c=l();void 0!==c&&(a=c)}}return a}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[o,l,s]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){var e,a=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};t.t=function(o,l){if(1&l&&(o=this(o)),8&l)return o;if("object"===typeof o&&o){if(4&l&&o.__esModule)return o;if(16&l&&"function"===typeof o.then)return o}var s=Object.create(null);t.r(s);var i={};e=e||[null,a({}),a([]),a(a)];for(var n=2&l&&o;"object"==typeof n&&!~e.indexOf(n);n=a(n))Object.getOwnPropertyNames(n).forEach((function(e){i[e]=function(){return o[e]}}));return i["default"]=function(){return o},t.d(s,i),s}}(),function(){t.d=function(e,a){for(var o in a)t.o(a,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})}}(),function(){t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(a,o){return t.f[o](e,a),a}),[]))}}(),function(){t.u=function(e){return"js/"+e+"."+{125:"b1a67adf",353:"7ae9df21",427:"35553364"}[e]+".js"}}(),function(){t.miniCssF=function(e){}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={},a="hotelcost:";t.l=function(o,l,s,i){if(e[o])e[o].push(l);else{var n,r;if(void 0!==s)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==o||u.getAttribute("data-webpack")==a+s){n=u;break}}n||(r=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,t.nc&&n.setAttribute("nonce",t.nc),n.setAttribute("data-webpack",a+s),n.src=o),e[o]=[l];var m=function(a,t){n.onerror=n.onload=null,clearTimeout(b);var l=e[o];if(delete e[o],n.parentNode&&n.parentNode.removeChild(n),l&&l.forEach((function(e){return e(t)})),a)return a(t)},b=setTimeout(m.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=m.bind(null,n.onerror),n.onload=m.bind(null,n.onload),r&&document.head.appendChild(n)}}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p=""}(),function(){var e={524:0};t.f.j=function(a,o){var l=t.o(e,a)?e[a]:void 0;if(0!==l)if(l)o.push(l[2]);else{var s=new Promise((function(t,o){l=e[a]=[t,o]}));o.push(l[2]=s);var i=t.p+t.u(a),n=new Error,r=function(o){if(t.o(e,a)&&(l=e[a],0!==l&&(e[a]=void 0),l)){var s=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;n.message="Loading chunk "+a+" failed.\n("+s+": "+i+")",n.name="ChunkLoadError",n.type=s,n.request=i,l[1](n)}};t.l(i,r,"chunk-"+a,a)}},t.O.j=function(a){return 0===e[a]};var a=function(a,o){var l,s,i=o[0],n=o[1],r=o[2],c=0;if(i.some((function(a){return 0!==e[a]}))){for(l in n)t.o(n,l)&&(t.m[l]=n[l]);if(r)var d=r(t)}for(a&&a(o);c<i.length;c++)s=i[c],t.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return t.O(d)},o=self["webpackChunkhotelcost"]=self["webpackChunkhotelcost"]||[];o.forEach(a.bind(null,0)),o.push=a.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],(function(){return t(9960)}));o=t.O(o)})();
//# sourceMappingURL=app.6ced4f18.js.map